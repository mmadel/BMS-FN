<ngx-spinner></ngx-spinner>
<c-container [fluid]="true" class="mt-3">
    <div class="card border-dark mb-2" *ngFor="let patientInsurance of filterpatientInsurances; index as i;">
        <div class="card-body">
            <div style="float: right;">
                <c-button-group aria-label="Button outlined group with nested dropdown" role="group">
                    <c-dropdown variant="btn-group">
                        <button cButton cDropdownToggle variant="outline">
                            Actions
                        </button>
                        <ul cDropdownMenu variant="outline">
                            <li><a cDropdownItem><svg cIcon name="cilViewStream" class="text-info"></svg>
                                    Preview</a></li>
                            <li cDropdownDivider></li>
                            <li><a cDropdownItem (click)="create(patientInsurance)"><svg cIcon
                                        name="cibAdobeAcrobatReader" class="text-danger"></svg>
                                    Print</a></li>
                            <li><a cDropdownItem (click)="createElectronic(patientInsurance)"><svg cIcon name="cilSend"
                                        class="text-success"></svg>
                                    Electronic Submission</a>
                            </li>
                        </ul>
                    </c-dropdown>
                </c-button-group>
            </div>
            <div>
                <h3><strong>
                        {{constructInsuranceCompnayTitle(patientInsurance)}}
                    </strong></h3>
                <h4>{{patientInsurance.patientInsurancePolicy.responsibility}}</h4>
                Primary ID : {{patientInsurance.patientInsurancePolicy.primaryId}} <br>
                <span *ngIf="patientInsurance.visibility === 'External'">
                    Payer ID : {{patientInsurance.insuranceCompany[2]}} <br>
                </span>
                <span *ngIf="patientInsurance.visibility === 'Internal' && patientInsurance.assigner !==null">
                    Payer ID : {{patientInsurance.assigner[0]}} <br>
                </span>
                Clearinghouse : Availity
            </div>
            <div class="col-6 border border-light mt-3 me-3 bg-light">
                <h5>Additional Settings</h5>
                <c-row>
                    <c-col xs="12" class="mt-1 mx-1">
                        <c-form-check inline>
                            <input cFormCheckInput id="datePerClaim" type="checkbox"
                                [(ngModel)]="patientInsurance.datePerClaim" />
                            <label cFormCheckLabel for="datePerClaim">
                                One date of service per claim
                            </label>
                        </c-form-check>
                    </c-col>
                    <c-col xs="6" class="mb-1 mx-1">
                        <label for="gd{{i}}_drc" class="control-label">
                            Delayed Reason Code (EDI only)
                        </label>
                        <select cSelect id="gd{{i}}_drc" sizing="sm" style="height: auto;line-height: 14px;">
                            <option value="1">none</option>
                            <option value="2">option-a</option>
                            <option value="3">option-b</option>
                        </select>
                    </c-col>
                </c-row>
            </div>

        </div>
    </div>
</c-container>
<c-modal id="create" [visible]="CorrectClaimVisibility" size="lg" backdrop="static">
    <c-modal-header>
        <h5 cModalTitle> Resubmission code and REF</h5>
        <button (click)="toggleIsCorrect()" cButtonClose></button>
    </c-modal-header>
    <c-modal-body>
        <form cForm>
            <div class="mb-3">
                <label cLabel for="exampleFormControlInput1">Resubmission codes</label>
                <select aria-label="Default select example" cSelect sizing="sm" [(ngModel)]="correctCode"
                    name="correctCode">
                    <option value="7">Corrected claim-7</option>
                    <option value="8">Void claim-8</option>
                </select>
            </div>
            <div class="mb-3">
                <label cLabel for="REF">REF#</label>
                <input cFormControl id="REF" placeholder="REF Number" sizing="sm" [(ngModel)]="refNumber"
                    name="refNumber" />
            </div>
            <div class="mb-3">
                <input cFormCheckInput id="checkOne" type="checkbox"/>
                <label cFormCheckLabel for="checkOne" class="mx-1">Handle claim without correction action</label>
            </div>
        </form>
    </c-modal-body>
    <c-modal-footer>
        <div class="col text-center">
            <button cButton color="primary" variant="outline" (click)="setCorrectClaim()">OK</button>
        </div>
    </c-modal-footer>
</c-modal>